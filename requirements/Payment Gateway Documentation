<div class="prose prose-invert prose-slate max-w-none prose-headings:text-white prose-h1:text-3xl prose-h1:font-bold prose-h1:mb-6 prose-h1:border-b prose-h1:border-slate-700 prose-h1:pb-4 prose-h2:text-2xl prose-h2:font-semibold prose-h2:mb-4 prose-h2:mt-8 prose-h3:text-xl prose-h3:font-semibold prose-h3:mb-3 prose-h3:mt-6 prose-h4:text-lg prose-h4:font-semibold prose-h4:mb-2 prose-h4:mt-4 prose-p:text-slate-300 prose-p:mb-4 prose-p:leading-relaxed prose-ul:text-slate-300 prose-ul:mb-4 prose-ul:list-disc prose-ul:list-inside prose-ul:space-y-2 prose-ol:text-slate-300 prose-ol:mb-4 prose-ol:list-decimal prose-ol:list-inside prose-ol:space-y-2 prose-li:text-slate-300 prose-code:bg-slate-700/50 prose-code:text-amber-400 prose-code:px-2 prose-code:py-1 prose-code:rounded prose-code:text-sm prose-code:font-mono prose-pre:bg-slate-800 prose-pre:border prose-pre:border-slate-700 prose-pre:rounded-lg prose-pre:p-4 prose-pre:mb-4 prose-pre:overflow-x-auto prose-pre:text-slate-300 prose-blockquote:border-l-4 prose-blockquote:border-amber-400 prose-blockquote:pl-4 prose-blockquote:py-2  prose-blockquote:mb-4 prose-blockquote:bg-slate-800/30 prose-blockquote:italic prose-blockquote:text-slate-300 prose-table:border prose-table:border-slate-700 prose-table:rounded-lg prose-table:mb-4 prose-thead:bg-slate-800 prose-tbody:bg-slate-900/50 prose-tr:border-b prose-tr:border-slate-700 prose-th:px-4 prose-th:py-3 prose-th:text-left prose-th:text-white prose-th:font-semibold prose-td:px-4 prose-td:py-3 prose-td:text-slate-300 prose-a:text-amber-400 prose-a:underline hover:prose-a:text-amber-300 prose-strong:text-white prose-strong:font-semibold prose-em:text-slate-300 prose-em:italic"><h1>–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–≥–æ API –ø–ª–∞—Ç–µ–∂–Ω–æ–≥–æ —à–ª—é–∑–∞ PaymentGateway</h1>
<p><em>–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: 15 –∞–≤–≥—É—Å—Ç–∞ 2025 –≥. –≤ 03:57</em></p>
<h2>–û–≥–ª–∞–≤–ª–µ–Ω–∏–µ</h2>
<ol>
<li><a href="#%D0%B6%D0%B8%D0%B7%D0%BD%D0%B5%D0%BD%D0%BD%D1%8B%D0%B9-%D1%86%D0%B8%D0%BA%D0%BB-%D0%BF%D0%BB%D0%B0%D1%82%D0%B5%D0%B6%D0%B0">–ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –ø–ª–∞—Ç–µ–∂–∞</a></li>
<li><a href="#%D0%B0%D1%83%D1%82%D0%B5%D0%BD%D1%82%D0%B8%D1%84%D0%B8%D0%BA%D0%B0%D1%86%D0%B8%D1%8F">–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è</a></li>
<li><a href="#%D0%BA%D0%BE%D0%B4%D1%8B-%D0%BE%D1%88%D0%B8%D0%B1%D0%BE%D0%BA">–ö–æ–¥—ã –æ—à–∏–±–æ–∫</a></li>
<li><a href="#api-%D1%8D%D0%BD%D0%B4%D0%BF%D0%BE%D0%B8%D0%BD%D1%82%D1%8B">API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã</a></li>
<li><a href="#%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80%D1%8B-%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D0%BE%D0%B2">–ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤</a></li>
</ol>
<hr>
<h2>–ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –ø–ª–∞—Ç–µ–∂–∞</h2>
<p>–°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–æ–ª–Ω—ã–π –∂–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–ª–∞—Ç–µ–∂–µ–π —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Å—Ç–∞–¥–∏—è–º–∏:</p>
<h3>–°—Ç–∞–¥–∏–∏ –ø–ª–∞—Ç–µ–∂–∞</h3>
<pre><code class="language-mermaid">graph TD
    A[–ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–∫–≤–∏–∑–∏—Ç–æ–≤ –º–µ—Ä—á–∞–Ω—Ç–∞] --&gt; B[–°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞]
    B --&gt; C[–û–∂–∏–¥–∞–Ω–∏–µ –æ–ø–ª–∞—Ç—ã NEW]
    C --&gt; D[–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è AUTHORIZED]
    D --&gt; E[–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ CONFIRMED]
    D --&gt; F[–û—Ç–º–µ–Ω–∞ CANCELLED]
    E --&gt; G[–í–æ–∑–≤—Ä–∞—Ç REFUNDED]
    C --&gt; H[–û—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ FAILED]
    C --&gt; I[–ò—Å—Ç–µ—á–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ EXPIRED]
</code></pre>
<h3>1. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –º–µ—Ä—á–∞–Ω—Ç–∞ (–ö–æ–º–∞–Ω–¥–∞ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–æ–≤ —ç—Ç–æ –¥–µ–ª–∞–µ—Ç. –†–µ–∫–≤–∏–∑–∏—Ç—ã –¥–æ—Å—Ç—É–ø–Ω—ã –≤ <a href="https://hub.hackload.kz">https://hub.hackload.kz</a>)</h3>
<ul>
<li><strong>–≠–Ω–¥–ø–æ–∏–Ω—Ç</strong>: <code>POST /api/v1/TeamRegistration/register</code></li>
<li><strong>–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ</strong>: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –º–µ—Ä—á–∞–Ω—Ç–∞ –¥–ª—è –ø—Ä–∏–µ–º–∞ –ø–ª–∞—Ç–µ–∂–µ–π</li>
<li><strong>–†–µ–∑—É–ª—å—Ç–∞—Ç</strong>: –ü–æ–ª—É—á–µ–Ω–∏–µ —É—á–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –¥–ª—è API</li>
</ul>
<h3>2. –°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞</h3>
<ul>
<li><strong>–≠–Ω–¥–ø–æ–∏–Ω—Ç</strong>: <code>POST /api/v1/PaymentInit/init</code></li>
<li><strong>–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ</strong>: –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–ª–∞—Ç–µ–∂–Ω–æ–≥–æ –Ω–∞–º–µ—Ä–µ–Ω–∏—è</li>
<li><strong>–°—Ç–∞—Ç—É—Å</strong>: <code>NEW</code></li>
<li><strong>–†–µ–∑—É–ª—å—Ç–∞—Ç</strong>: URL –¥–ª—è –æ–ø–ª–∞—Ç—ã –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–º</li>
</ul>
<h3>3. –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–ª–∞—Ç–µ–∂–∞</h3>
<ul>
<li><strong>–ü—Ä–æ—Ü–µ—Å—Å</strong>: –ü–æ–∫—É–ø–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç –¥–∞–Ω–Ω—ã–µ –∫–∞—Ä—Ç—ã –Ω–∞ –ø–ª–∞—Ç–µ–∂–Ω–æ–π —Ñ–æ—Ä–º–µ</li>
<li><strong>–°—Ç–∞—Ç—É—Å</strong>: <code>NEW</code> ‚Üí <code>AUTHORIZED</code></li>
<li><strong>–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å</strong>: PCI DSS compliant –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–∞—Ä—Ç–æ—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö</li>
</ul>
<h3>4. –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞</h3>
<ul>
<li><strong>–≠–Ω–¥–ø–æ–∏–Ω—Ç</strong>: <code>POST /api/v1/PaymentConfirm/confirm</code></li>
<li><strong>–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ</strong>: –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–ª–∞—Ç–µ–∂–∞ –¥–ª—è —Å–ø–∏—Å–∞–Ω–∏—è —Å—Ä–µ–¥—Å—Ç–≤</li>
<li><strong>–°—Ç–∞—Ç—É—Å</strong>: <code>AUTHORIZED</code> ‚Üí <code>CONFIRMED</code></li>
</ul>
<h3>5. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞</h3>
<ul>
<li><strong>–≠–Ω–¥–ø–æ–∏–Ω—Ç</strong>: <code>POST /api/v1/PaymentCheck/check</code></li>
<li><strong>–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ</strong>: –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ —Å—Ç–∞—Ç—É—Å–∞ –ø–ª–∞—Ç–µ–∂–∞</li>
<li><strong>–ü–æ–¥–¥–µ—Ä–∂–∫–∞</strong>: –ü–æ–∏—Å–∫ –ø–æ PaymentId –∏–ª–∏ OrderId</li>
</ul>
<h3>6. –û—Ç–º–µ–Ω–∞ –ø–ª–∞—Ç–µ–∂–∞</h3>
<ul>
<li><strong>–≠–Ω–¥–ø–æ–∏–Ω—Ç</strong>: <code>POST /api/v1/PaymentCancel/cancel</code></li>
<li><strong>–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ</strong>: –û—Ç–º–µ–Ω–∞, —Ä–µ–≤–µ—Ä—Å –∏–ª–∏ –≤–æ–∑–≤—Ä–∞—Ç –ø–ª–∞—Ç–µ–∂–∞</li>
<li><strong>–¢–∏–ø—ã</strong>: –û—Ç–º–µ–Ω–∞ (NEW), –†–µ–≤–µ—Ä—Å (AUTHORIZED), –í–æ–∑–≤—Ä–∞—Ç (CONFIRMED)</li>
</ul>
<hr>
<h2>–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è</h2>
<p>–°–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç SHA-256 HMAC –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é —Å –∑–∞—â–∏—Ç–æ–π –æ—Ç –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –∞—Ç–∞–∫.</p>
<h3>–ê–ª–≥–æ—Ä–∏—Ç–º –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–æ–∫–µ–Ω–∞ (–£–ü–†–û–©–ï–ù–ù–ê–Ø –í–ï–†–°–ò–Ø)</h3>
<p><strong>–ö—Ä–∞—Ç–∫–∞—è —Ñ–æ—Ä–º—É–ª–∞</strong>: <code>Token = SHA256(Amount + Currency + OrderId + Password + TeamSlug)</code></p>
<h4>–î–µ—Ç–∞–ª—å–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º:</h4>
<p><strong>–í–ê–ñ–ù–û</strong>: –°–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —É–ø—Ä–æ—â–µ–Ω–Ω—É—é —Å—Ö–µ–º—É –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Å <strong>—Ç–æ–ª—å–∫–æ 5 –æ—Å–Ω–æ–≤–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏</strong>.</p>
<ol>
<li><p><strong>–°–±–æ—Ä –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤</strong>: –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è <strong>—Ç–æ–ª—å–∫–æ 5 –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤</strong>:</p>
<ul>
<li>‚úÖ <strong>Amount</strong> - —Å—É–º–º–∞ –ø–ª–∞—Ç–µ–∂–∞ –≤ –∫–æ–ø–µ–π–∫–∞—Ö</li>
<li>‚úÖ <strong>Currency</strong> - –≤–∞–ª—é—Ç–∞ –ø–ª–∞—Ç–µ–∂–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "RUB")</li>
<li>‚úÖ <strong>OrderId</strong> - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∑–∞–∫–∞–∑–∞</li>
<li>‚úÖ <strong>TeamSlug</strong> - –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∫–æ–º–∞–Ω–¥—ã. –£–∫–∞–∑–∞–Ω –∫–∞–∫ <code>MERCHANT_ID</code></li>
<li>‚úÖ <strong>Password</strong> - –ø–∞—Ä–æ–ª—å –∫–æ–º–∞–Ω–¥—ã. –£–∫–∞–∑–∞–Ω –∫–∞–∫ <code>MERCHANT_PASSWORD</code> </li>
<li>‚ùå <strong>–ò—Å–∫–ª—é—á–∞—é—Ç—Å—è</strong>: –í–°–ï –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (Description, Email, URLs, etc.)</li>
</ul>
</li>
<li><p><strong>–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è</strong>: –ö 4 –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º –∑–∞–ø—Ä–æ—Å–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è <code>Password</code> –∫–æ–º–∞–Ω–¥—ã</p>
</li>
<li><p><strong>–§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫</strong>: –ü–∞—Ä–∞–º–µ—Ç—Ä—ã <strong>–í–°–ï–ì–î–ê</strong> –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ —Å—Ç—Ä–æ–≥–æ–º –∞–ª—Ñ–∞–≤–∏—Ç–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ:</p>
<ul>
<li><strong>–ö–†–ò–¢–ò–ß–ù–û</strong>: <code>Amount</code> ‚Üí <code>Currency</code> ‚Üí <code>OrderId</code> ‚Üí <code>Password</code> ‚Üí <code>TeamSlug</code></li>
<li>–≠—Ç–æ—Ç –ø–æ—Ä—è–¥–æ–∫ –ù–ï –º–µ–Ω—è–µ—Ç—Å—è –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –ø–æ—Ä—è–¥–∫–∞ –≤ JSON –∑–∞–ø—Ä–æ—Å–µ</li>
</ul>
</li>
<li><p><strong>–ö–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü–∏—è –∑–Ω–∞—á–µ–Ω–∏–π</strong>: –ó–Ω–∞—á–µ–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∫–æ–Ω–∫–∞—Ç–µ–Ω–∏—Ä—É—é—Ç—Å—è –±–µ–∑ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–µ–π</p>
<ul>
<li>–ü—Ä–∏–º–µ—Ä: <code>"19200" + "RUB" + "order-123" + "MyPassword123" + "my-team"</code></li>
<li>–†–µ–∑—É–ª—å—Ç–∞—Ç: <code>"19200RUBorder-123MyPassword123my-team"</code></li>
</ul>
</li>
<li><p><strong>SHA-256 —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ</strong>: –ö –ø–æ–ª—É—á–∏–≤—à–µ–π—Å—è —Å—Ç—Ä–æ–∫–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è SHA-256 —Å –∫–æ–¥–∏—Ä–æ–≤–∫–æ–π UTF-8</p>
<ul>
<li>–†–µ–∑—É–ª—å—Ç–∞—Ç: —Å—Ç—Ä–æ–∫–∞ –≤ –Ω–∏–∂–Ω–µ–º —Ä–µ–≥–∏—Å—Ç—Ä–µ (hex)</li>
</ul>
</li>
</ol>
<h4>–í–∞–∂–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —É–ø—Ä–æ—â–µ–Ω–Ω–æ–π —Å—Ö–µ–º—ã:</h4>
<ul>
<li><strong>–¢–æ–ª—å–∫–æ 5 –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤</strong>: –ù–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ JSON –∑–∞–ø—Ä–æ—Å–∞, –≤ —Ç–æ–∫–µ–Ω–µ —É—á–∞—Å—Ç–≤—É—é—Ç —Ç–æ–ª—å–∫–æ Amount, Currency, OrderId, Password, TeamSlug</li>
<li><strong>–ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π</strong>: Description, Email, URLs, Receipt, Data –∏ –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è –ù–ï –≤–ª–∏—è—é—Ç –Ω–∞ —Ç–æ–∫–µ–Ω</li>
<li><strong>–ü—Ä–æ—Å—Ç–æ—Ç–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏</strong>: –ù–µ –Ω—É–∂–Ω–æ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∑–∞–ø—Ä–æ—Å–∞ - –≤—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –æ–¥–Ω–∏ –∏ —Ç–µ –∂–µ 5 –ø–æ–ª–µ–π</li>
<li><strong>–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å</strong>: –¢–æ–∫–µ–Ω—ã –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –æ–¥–∏–Ω–∞–∫–æ–≤–æ –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –∏ —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤</li>
</ul>
<h3>–ü—Ä–∏–º–µ—Ä –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–æ–∫–µ–Ω–∞ (–£–ü–†–û–©–ï–ù–ù–ê–Ø –°–•–ï–ú–ê)</h3>
<pre><code class="language-bash"># –ò—Å—Ö–æ–¥–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (—Ç–æ–ª—å–∫–æ 5 –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö)
amount="19200"
currency="RUB"
orderId="21090"
teamSlug="MerchantTeamSlug"
password="usaf8fw8fsw21g"

# –ö–†–ò–¢–ò–ß–ù–û: –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –í–°–ï–ì–î–ê –≤ —Å—Ç—Ä–æ–≥–æ–º –∞–ª—Ñ–∞–≤–∏—Ç–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ:
# Amount ‚Üí Currency ‚Üí OrderId ‚Üí Password ‚Üí TeamSlug
token_params="${amount}${currency}${orderId}${password}${teamSlug}"

echo "–°—Ç—Ä–æ–∫–∞ –¥–ª—è —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è: $token_params"
# –†–µ–∑—É–ª—å—Ç–∞—Ç: "19200RUB21090usaf8fw8fsw21gMerchantTeamSlug"

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–∞ SHA-256
token=$(echo -n "$token_params" | sha256sum | cut -d' ' -f1)
echo "–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–æ–∫–µ–Ω: $token"

# –í–ê–ñ–ù–û: –î–∞–∂–µ –µ—Å–ª–∏ –∑–∞–ø—Ä–æ—Å —Å–æ–¥–µ—Ä–∂–∏—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è, 
# –æ–Ω–∏ –ù–ï —É—á–∞—Å—Ç–≤—É—é—Ç –≤ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–æ–∫–µ–Ω–∞:
curl -X POST /api/v1/PaymentInit/init \
  -H "Content-Type: application/json" \
  -d "{
    \"teamSlug\": \"$teamSlug\",
    \"token\": \"$token\",
    \"amount\": $amount,
    \"orderId\": \"$orderId\",
    \"currency\": \"$currency\",
    \"description\": \"–≠—Ç–æ –ø–æ–ª–µ –ù–ï –≤–ª–∏—è–µ—Ç –Ω–∞ —Ç–æ–∫–µ–Ω\",
    \"email\": \"customer@example.com\",
    \"successURL\": \"https://example.com/success\",
    \"failURL\": \"https://example.com/fail\"
  }"
</code></pre>
<h4>–ü–æ—à–∞–≥–æ–≤—ã–π –ø—Ä–∏–º–µ—Ä —É–ø—Ä–æ—â–µ–Ω–Ω–æ–π –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏:</h4>
<ol>
<li><strong>–ò—Å—Ö–æ–¥–Ω—ã–π –∑–∞–ø—Ä–æ—Å</strong> (–º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –ª—é–±—ã–µ –ø–æ–ª—è):</li>
</ol>
<pre><code class="language-json">{
  "teamSlug": "MerchantTeamSlug",
  "amount": 19200,
  "orderId": "21090",
  "currency": "RUB",
  "description": "–ü–æ–¥–∞—Ä–æ—á–Ω–∞—è –∫–∞—Ä—Ç–∞",     // ‚ùå –ò–ì–ù–û–†–ò–†–£–ï–¢–°–Ø
  "email": "customer@example.com",      // ‚ùå –ò–ì–ù–û–†–ò–†–£–ï–¢–°–Ø
  "successURL": "https://example.com",  // ‚ùå –ò–ì–ù–û–†–ò–†–£–ï–¢–°–Ø
  "receipt": { ... },                   // ‚ùå –ò–ì–ù–û–†–ò–†–£–ï–¢–°–Ø
  "data": { ... }                       // ‚ùå –ò–ì–ù–û–†–ò–†–£–ï–¢–°–Ø
}
</code></pre>
<ol start="2">
<li><strong>–ò–∑–≤–ª–µ—á–µ–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã</strong> (–¢–û–õ–¨–ö–û 5 –æ—Å–Ω–æ–≤–Ω—ã—Ö):</li>
</ol>
<pre><code>Amount: "19200"     ‚úÖ –ò–°–ü–û–õ–¨–ó–£–ï–¢–°–Ø
Currency: "RUB"     ‚úÖ –ò–°–ü–û–õ–¨–ó–£–ï–¢–°–Ø
OrderId: "21090"    ‚úÖ –ò–°–ü–û–õ–¨–ó–£–ï–¢–°–Ø
TeamSlug: "MerchantTeamSlug"  ‚úÖ –ò–°–ü–û–õ–¨–ó–£–ï–¢–°–Ø
</code></pre>
<ol start="3">
<li><strong>–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è</strong>:</li>
</ol>
<pre><code>Amount: "19200"
Currency: "RUB"
OrderId: "21090"
Password: "usaf8fw8fsw21g"  ‚úÖ –î–û–ë–ê–í–õ–Ø–ï–¢–°–Ø –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ò
TeamSlug: "MerchantTeamSlug"
</code></pre>
<ol start="4">
<li><strong>–§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫</strong> (Amount ‚Üí Currency ‚Üí OrderId ‚Üí Password ‚Üí TeamSlug):</li>
</ol>
<pre><code>Amount: "19200"
Currency: "RUB"  
OrderId: "21090"
Password: "usaf8fw8fsw21g"
TeamSlug: "MerchantTeamSlug"
</code></pre>
<ol start="5">
<li><strong>–ö–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü–∏—è –∑–Ω–∞—á–µ–Ω–∏–π</strong>:</li>
</ol>
<pre><code>"19200RUB21090usaf8fw8fsw21gMerchantTeamSlug"
</code></pre>
<ol start="6">
<li><strong>SHA-256 —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ</strong>:</li>
</ol>
<pre><code>Input:  "19200RUB21090usaf8fw8fsw21gMerchantTeamSlug"
Output: "b8f2f8e5c9d6a4c8f7b5e3a2d1f0e9c8b7a6f5d4e3c2b1a0f9e8d7c6b5a4f3e2"
</code></pre>
<p><strong>–ö–ª—é—á–µ–≤–∞—è –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å</strong>: –ù–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–æ–ª–µ–π –≤ JSON, —Ç–æ–∫–µ–Ω –≤—Å–µ–≥–¥–∞ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∏–∑ –æ–¥–Ω–∏—Ö –∏ —Ç–µ—Ö –∂–µ 5 –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤!</p>
<h3>–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å</h3>
<ul>
<li><strong>–ó–∞—â–∏—Ç–∞ –æ—Ç –ø–æ–≤—Ç–æ—Ä–æ–≤</strong>: –ö–∞–∂–¥—ã–π —Ç–æ–∫–µ–Ω —É–Ω–∏–∫–∞–ª–µ–Ω –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –Ω–∞–±–æ—Ä–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤</li>
<li><strong>–í—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫–Ω–∞</strong>: –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ—Ä–æ—Ç–∫–∏–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫–Ω–∞ –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤</li>
<li><strong>HTTPS</strong>: –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –¥–æ–ª–∂–Ω—ã –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –ø–æ HTTPS</li>
</ul>
<hr>
<h2>–ö–æ–¥—ã –æ—à–∏–±–æ–∫</h2>
<h3>–û—à–∏–±–∫–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–ª–∞—Ç–µ–∂–∞ (1xxx)</h3>
<table>
<thead>
<tr>
<th>–ö–æ–¥</th>
<th>–û–ø–∏—Å–∞–Ω–∏–µ</th>
<th>HTTP –°—Ç–∞—Ç—É—Å</th>
<th>–î–µ–π—Å—Ç–≤–∏–µ</th>
</tr>
</thead>
<tbody><tr>
<td>1000</td>
<td>–ù–µ–≤–µ—Ä–Ω–æ–µ —Ç–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞</td>
<td>400</td>
<td>–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç JSON</td>
</tr>
<tr>
<td>1001</td>
<td>–û—à–∏–±–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏</td>
<td>401</td>
<td>–ü—Ä–æ–≤–µ—Ä–∏—Ç—å teamSlug –∏ token</td>
</tr>
<tr>
<td>1002</td>
<td>–î—É–±–ª–∏—Ä—É—é—â–∏–π—Å—è –ø–ª–∞—Ç–µ–∂</td>
<td>409</td>
<td>–ò–∑–º–µ–Ω–∏—Ç—å orderId –∏–ª–∏ –¥–æ–∂–¥–∞—Ç—å—Å—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è</td>
</tr>
<tr>
<td>1003</td>
<td>–ù–µ–≤–µ—Ä–Ω—ã–π –∞—Ä–≥—É–º–µ–Ω—Ç</td>
<td>400</td>
<td>–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤</td>
</tr>
<tr>
<td>1004</td>
<td>–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤</td>
<td>402</td>
<td>–ü–æ–ø–æ–ª–Ω–∏—Ç—å –±–∞–ª–∞–Ω—Å</td>
</tr>
<tr>
<td>1005</td>
<td>–ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –ª–∏–º–∏—Ç–æ–≤</td>
<td>400</td>
<td>–£–º–µ–Ω—å—à–∏—Ç—å —Å—É–º–º—É –∏–ª–∏ —Å–≤—è–∑–∞—Ç—å—Å—è —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π</td>
</tr>
<tr>
<td>1006</td>
<td>–ù–µ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–∞—è –≤–∞–ª—é—Ç–∞</td>
<td>400</td>
<td>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å RUB, USD –∏–ª–∏ EUR</td>
</tr>
<tr>
<td>1007</td>
<td>–û—à–∏–±–∫–∞ –ø–ª–∞—Ç–µ–∂–Ω–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞</td>
<td>402</td>
<td>–ü–æ–≤—Ç–æ—Ä–∏—Ç—å –ø–æ–∑–∂–µ</td>
</tr>
<tr>
<td>1100</td>
<td>–û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏</td>
<td>400</td>
<td>–ò—Å–ø—Ä–∞–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å–∞</td>
</tr>
<tr>
<td>1404</td>
<td>–ü–ª–∞—Ç–µ–∂ –Ω–µ –Ω–∞–π–¥–µ–Ω</td>
<td>404</td>
<td>–ü—Ä–æ–≤–µ—Ä–∏—Ç—å paymentId</td>
</tr>
<tr>
<td>1408</td>
<td>–ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –æ–∂–∏–¥–∞–Ω–∏—è</td>
<td>408</td>
<td>–ü–æ–≤—Ç–æ—Ä–∏—Ç—å –∑–∞–ø—Ä–æ—Å</td>
</tr>
<tr>
<td>1422</td>
<td>–ù–∞—Ä—É—à–µ–Ω–∏–µ –±–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª</td>
<td>422</td>
<td>–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è</td>
</tr>
<tr>
<td>1429</td>
<td>–ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –ª–∏–º–∏—Ç–∞ –∑–∞–ø—Ä–æ—Å–æ–≤</td>
<td>429</td>
<td>–î–æ–∂–¥–∞—Ç—å—Å—è –∏ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å</td>
</tr>
<tr>
<td>9998</td>
<td>–û—à–∏–±–∫–∞ —Å–∏—Å—Ç–µ–º—ã</td>
<td>500</td>
<td>–û–±—Ä–∞—Ç–∏—Ç—å—Å—è –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É</td>
</tr>
<tr>
<td>9999</td>
<td>–í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞</td>
<td>500</td>
<td>–û–±—Ä–∞—Ç–∏—Ç—å—Å—è –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É</td>
</tr>
</tbody></table>
<h3>–û—à–∏–±–∫–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞ (1xxx)</h3>
<table>
<thead>
<tr>
<th>–ö–æ–¥</th>
<th>–û–ø–∏—Å–∞–Ω–∏–µ</th>
<th>HTTP –°—Ç–∞—Ç—É—Å</th>
<th>–î–µ–π—Å—Ç–≤–∏–µ</th>
</tr>
</thead>
<tbody><tr>
<td>1000</td>
<td>–ù–µ–≤–µ—Ä–Ω–æ–µ —Ç–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞</td>
<td>400</td>
<td>–ü—Ä–æ–≤–µ—Ä–∏—Ç—å form–∞—Ç JSON</td>
</tr>
<tr>
<td>1001</td>
<td>–û—à–∏–±–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏</td>
<td>401</td>
<td>–ü—Ä–æ–≤–µ—Ä–∏—Ç—å teamSlug –∏ token</td>
</tr>
<tr>
<td>1003</td>
<td>–ù–µ–≤–µ—Ä–Ω—ã–π –∞—Ä–≥—É–º–µ–Ω—Ç</td>
<td>400</td>
<td>–ü—Ä–æ–≤–µ—Ä–∏—Ç—å paymentId –∏–ª–∏ orderId</td>
</tr>
<tr>
<td>1100</td>
<td>–û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏</td>
<td>400</td>
<td>–ò—Å–ø—Ä–∞–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å–∞</td>
</tr>
<tr>
<td>1404</td>
<td>–ü–ª–∞—Ç–µ–∂ –Ω–µ –Ω–∞–π–¥–µ–Ω</td>
<td>404</td>
<td>–ü—Ä–æ–≤–µ—Ä–∏—Ç—å paymentId/orderId</td>
</tr>
<tr>
<td>1408</td>
<td>–ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –æ–∂–∏–¥–∞–Ω–∏—è</td>
<td>408</td>
<td>–ü–æ–≤—Ç–æ—Ä–∏—Ç—å –∑–∞–ø—Ä–æ—Å</td>
</tr>
<tr>
<td>1429</td>
<td>–ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –ª–∏–º–∏—Ç–∞ –∑–∞–ø—Ä–æ—Å–æ–≤</td>
<td>429</td>
<td>–î–æ–∂–¥–∞—Ç—å—Å—è –∏ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å</td>
</tr>
<tr>
<td>9999</td>
<td>–í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞</td>
<td>500</td>
<td>–û–±—Ä–∞—Ç–∏—Ç—å—Å—è –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É</td>
</tr>
</tbody></table>
<h3>–û—à–∏–±–∫–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø–ª–∞—Ç–µ–∂–∞ (2xxx)</h3>
<table>
<thead>
<tr>
<th>–ö–æ–¥</th>
<th>–û–ø–∏—Å–∞–Ω–∏–µ</th>
<th>HTTP –°—Ç–∞—Ç—É—Å</th>
<th>–î–µ–π—Å—Ç–≤–∏–µ</th>
</tr>
</thead>
<tbody><tr>
<td>2000</td>
<td>–ù–µ–≤–µ—Ä–Ω–æ–µ —Ç–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞</td>
<td>400</td>
<td>–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç JSON</td>
</tr>
<tr>
<td>2001</td>
<td>–û—à–∏–±–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏</td>
<td>401</td>
<td>–ü—Ä–æ–≤–µ—Ä–∏—Ç—å teamSlug –∏ token</td>
</tr>
<tr>
<td>2003</td>
<td>–ù–µ–≤–µ—Ä–Ω—ã–π –∞—Ä–≥—É–º–µ–Ω—Ç</td>
<td>400</td>
<td>–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤</td>
</tr>
<tr>
<td>2100</td>
<td>–û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏</td>
<td>400</td>
<td>–ò—Å–ø—Ä–∞–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å–∞</td>
</tr>
<tr>
<td>2404</td>
<td>–ü–ª–∞—Ç–µ–∂ –Ω–µ –Ω–∞–π–¥–µ–Ω</td>
<td>404</td>
<td>–ü—Ä–æ–≤–µ—Ä–∏—Ç—å paymentId</td>
</tr>
<tr>
<td>2408</td>
<td>–ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –æ–∂–∏–¥–∞–Ω–∏—è</td>
<td>408</td>
<td>–ü–æ–≤—Ç–æ—Ä–∏—Ç—å –∑–∞–ø—Ä–æ—Å</td>
</tr>
<tr>
<td>2409</td>
<td>–ü–ª–∞—Ç–µ–∂ —É–∂–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω</td>
<td>409</td>
<td>–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –ø–ª–∞—Ç–µ–∂–∞</td>
</tr>
<tr>
<td>2429</td>
<td>–ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –ª–∏–º–∏—Ç–∞ –∑–∞–ø—Ä–æ—Å–æ–≤</td>
<td>429</td>
<td>–î–æ–∂–¥–∞—Ç—å—Å—è –∏ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å</td>
</tr>
<tr>
<td>9999</td>
<td>–í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞</td>
<td>500</td>
<td>–û–±—Ä–∞—Ç–∏—Ç—å—Å—è –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É</td>
</tr>
</tbody></table>
<h3>–û—à–∏–±–∫–∏ –æ—Ç–º–µ–Ω—ã –ø–ª–∞—Ç–µ–∂–∞ (3xxx)</h3>
<table>
<thead>
<tr>
<th>–ö–æ–¥</th>
<th>–û–ø–∏—Å–∞–Ω–∏–µ</th>
<th>HTTP –°—Ç–∞—Ç—É—Å</th>
<th>–î–µ–π—Å—Ç–≤–∏–µ</th>
</tr>
</thead>
<tbody><tr>
<td>3000</td>
<td>–ù–µ–≤–µ—Ä–Ω–æ–µ —Ç–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞</td>
<td>400</td>
<td>–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç JSON</td>
</tr>
<tr>
<td>3001</td>
<td>–û—à–∏–±–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏</td>
<td>401</td>
<td>–ü—Ä–æ–≤–µ—Ä–∏—Ç—å teamSlug –∏ token</td>
</tr>
<tr>
<td>3003</td>
<td>–ù–µ–≤–µ—Ä–Ω—ã–π –∞—Ä–≥—É–º–µ–Ω—Ç</td>
<td>400</td>
<td>–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤</td>
</tr>
<tr>
<td>3100</td>
<td>–û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏</td>
<td>400</td>
<td>–ò—Å–ø—Ä–∞–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å–∞</td>
</tr>
<tr>
<td>3404</td>
<td>–ü–ª–∞—Ç–µ–∂ –Ω–µ –Ω–∞–π–¥–µ–Ω</td>
<td>404</td>
<td>–ü—Ä–æ–≤–µ—Ä–∏—Ç—å paymentId</td>
</tr>
<tr>
<td>3408</td>
<td>–ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –æ–∂–∏–¥–∞–Ω–∏—è</td>
<td>408</td>
<td>–ü–æ–≤—Ç–æ—Ä–∏—Ç—å –∑–∞–ø—Ä–æ—Å</td>
</tr>
<tr>
<td>3409</td>
<td>–ü–ª–∞—Ç–µ–∂ —É–∂–µ –æ—Ç–º–µ–Ω–µ–Ω</td>
<td>409</td>
<td>–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –ø–ª–∞—Ç–µ–∂–∞</td>
</tr>
<tr>
<td>3422</td>
<td>–ù–∞—Ä—É—à–µ–Ω–∏–µ –±–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª</td>
<td>422</td>
<td>–ß–∞—Å—Ç–∏—á–Ω–∞—è –æ—Ç–º–µ–Ω–∞ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è</td>
</tr>
<tr>
<td>3429</td>
<td>–ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –ª–∏–º–∏—Ç–∞ –∑–∞–ø—Ä–æ—Å–æ–≤</td>
<td>429</td>
<td>–î–æ–∂–¥–∞—Ç—å—Å—è –∏ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å</td>
</tr>
<tr>
<td>3503</td>
<td>–°–µ—Ä–≤–∏—Å –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω</td>
<td>503</td>
<td>–ü–æ–≤—Ç–æ—Ä–∏—Ç—å –ø–æ–∑–∂–µ</td>
</tr>
<tr>
<td>9999</td>
<td>–í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞</td>
<td>500</td>
<td>–û–±—Ä–∞—Ç–∏—Ç—å—Å—è –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É</td>
</tr>
</tbody></table>
<h3>–û—à–∏–±–∫–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∫–æ–º–∞–Ω–¥—ã (2xxx)</h3>
<table>
<thead>
<tr>
<th>–ö–æ–¥</th>
<th>–û–ø–∏—Å–∞–Ω–∏–µ</th>
<th>HTTP –°—Ç–∞—Ç—É—Å</th>
<th>–î–µ–π—Å—Ç–≤–∏–µ</th>
</tr>
</thead>
<tbody><tr>
<td>2001</td>
<td>–ù–µ–≤–µ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å–∞</td>
<td>400</td>
<td>–ò—Å–ø—Ä–∞–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ</td>
</tr>
<tr>
<td>2002</td>
<td>TeamSlug —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç</td>
<td>409</td>
<td>–í—ã–±—Ä–∞—Ç—å –¥—Ä—É–≥–æ–π teamSlug</td>
</tr>
<tr>
<td>2003</td>
<td>Email —É–∂–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω</td>
<td>409</td>
<td>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–æ–π email</td>
</tr>
<tr>
<td>2004</td>
<td>–£—Å–ª–æ–≤–∏—è –Ω–µ –ø—Ä–∏–Ω—è—Ç—ã</td>
<td>400</td>
<td>–ü—Ä–∏–Ω—è—Ç—å —É—Å–ª–æ–≤–∏—è –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è</td>
</tr>
<tr>
<td>2404</td>
<td>–ö–æ–º–∞–Ω–¥–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞</td>
<td>404</td>
<td>–ü—Ä–æ–≤–µ—Ä–∏—Ç—å teamSlug</td>
</tr>
<tr>
<td>2429</td>
<td>–ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –ª–∏–º–∏—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–π</td>
<td>429</td>
<td>–î–æ–∂–¥–∞—Ç—å—Å—è –∏ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å</td>
</tr>
<tr>
<td>9999</td>
<td>–í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞</td>
<td>500</td>
<td>–û–±—Ä–∞—Ç–∏—Ç—å—Å—è –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É</td>
</tr>
</tbody></table>
<hr>
<h2>API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã</h2>
<h3>1. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∫–æ–º–∞–Ω–¥—ã (–î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞)</h3>
<p><strong>POST</strong> <code>/api/v1/TeamRegistration/register</code></p>
<p>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –º–µ—Ä—á–∞–Ω—Ç–∞ –¥–ª—è –ø—Ä–∏–µ–º–∞ –ø–ª–∞—Ç–µ–∂–µ–π.</p>
<p><strong>–ó–∞–≥–æ–ª–æ–≤–∫–∏:</strong></p>
<pre><code>Content-Type: application/json
</code></pre>
<p><strong>–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:</strong></p>
<pre><code class="language-json">{
  "teamSlug": "my-online-store",
  "password": "SecurePassword123!",
  "teamName": "My Online Store",
  "email": "merchant@mystore.com",
  "phone": "+1234567890",
  "successURL": "https://mystore.com/payment/success",
  "failURL": "https://mystore.com/payment/fail",
  "notificationURL": "https://mystore.com/payment/webhook",
  "supportedCurrencies": "RUB,USD,EUR",
  "businessInfo": {
    "businessType": "ecommerce",
    "website": "https://mystore.com"
  },
  "acceptTerms": true
}
</code></pre>
<p><strong>–û—Ç–≤–µ—Ç (201 Created):</strong></p>
<pre><code class="language-json">{
  "success": true,
  "message": "Team registered successfully",
  "teamSlug": "my-online-store",
  "teamId": "123e4567-e89b-12d3-a456-426614174000",
  "passwordHashPreview": "d3ad9315...",
  "createdAt": "2025-08-06T10:30:00Z",
  "status": "ACTIVE",
  "apiEndpoint": "https://gateway.hackload.com/api/v1",
  "details": {
    "teamName": "My Online Store",
    "email": "merchant@mystore.com",
    "supportedCurrencies": ["RUB", "USD", "EUR"],
    "nextSteps": [
      "Test payment initialization using your credentials",
      "Configure webhook endpoint for notifications",
      "Review API documentation for integration"
    ]
  }
}
</code></pre>
<h3>2. –°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞</h3>
<p>–ó–¥–µ—Å—å –∏ –≤–µ–∑–¥–µ –¥–∞–ª–µ–µ, <code>teamSlug</code> —É–∫–∞–∑–∞–Ω –∫–∞–∫ <code>MERCHANT_ID</code> –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥—ã</p>
<p><strong>POST</strong> <code>/api/v1/PaymentInit/init</code></p>
<p>–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–ª–∞—Ç–µ–∂–Ω–æ–≥–æ –Ω–∞–º–µ—Ä–µ–Ω–∏—è.</p>
<p><strong>–ó–∞–≥–æ–ª–æ–≤–∫–∏:</strong></p>
<pre><code>Content-Type: application/json
</code></pre>
<p><strong>–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:</strong></p>
<pre><code class="language-json">{
  "teamSlug": "my-store",
  "token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9...",
  "amount": 150000,
  "orderId": "order-12345",
  "currency": "RUB",
  "description": "Book purchase",
  "successURL": "https://mystore.com/success",
  "failURL": "https://mystore.com/fail",
  "notificationURL": "https://mystore.com/webhook",
  "paymentExpiry": 30,
  "email": "customer@example.com",
  "language": "ru"
}
</code></pre>
<p><strong>–û—Ç–≤–µ—Ç (200 OK):</strong></p>
<pre><code class="language-json">{
  "success": true,
  "paymentId": "pay_123456789",
  "orderId": "order-12345",
  "status": "NEW",
  "amount": 150000,
  "currency": "RUB",
  "paymentURL": "https://gateway.hackload.com/payment/pay_123456789",
  "expiresAt": "2025-01-30T12:30:00Z",
  "createdAt": "2025-01-30T12:00:00Z"
}
</code></pre>
<h3>3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –ø–ª–∞—Ç–µ–∂–∞</h3>
<p><strong>POST</strong> <code>/api/v1/PaymentCheck/check</code></p>
<p>–ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –ø–ª–∞—Ç–µ–∂–∞ –ø–æ PaymentId –∏–ª–∏ OrderId.</p>
<p><strong>–ó–∞–≥–æ–ª–æ–≤–∫–∏:</strong></p>
<pre><code>Content-Type: application/json
</code></pre>
<p><strong>–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ (–ø–æ PaymentId):</strong></p>
<pre><code class="language-json">{
  "teamSlug": "my-store",
  "token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9...",
  "paymentId": "pay_123456789",
  "includeTransactions": true,
  "includeCardDetails": true,
  "includeCustomerInfo": false,
  "includeReceipt": false,
  "language": "ru"
}
</code></pre>
<p><strong>–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ (–ø–æ OrderId):</strong></p>
<pre><code class="language-json">{
  "teamSlug": "my-store",
  "token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9...",
  "orderId": "order-12345",
  "includeTransactions": false,
  "includeCardDetails": false,
  "includeCustomerInfo": true,
  "includeReceipt": true,
  "language": "en"
}
</code></pre>
<p><strong>–û—Ç–≤–µ—Ç (200 OK):</strong></p>
<pre><code class="language-json">{
  "success": true,
  "payments": [
    {
      "paymentId": "pay_123456789",
      "orderId": "order-12345",
      "status": "CONFIRMED",
      "statusDescription": "Payment confirmed successfully",
      "amount": 150000,
      "currency": "RUB",
      "createdAt": "2025-01-30T12:00:00Z",
      "updatedAt": "2025-01-30T12:05:00Z",
      "expiresAt": "2025-01-30T12:30:00Z",
      "description": "Book purchase",
      "payType": "O"
    }
  ],
  "totalCount": 1,
  "orderId": "order-12345"
}
</code></pre>
<h3>4. –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞</h3>
<p><strong>POST</strong> <code>/api/v1/PaymentConfirm/confirm</code></p>
<p>–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–ª–∞—Ç–µ–∂–∞ –¥–ª—è —Å–ø–∏—Å–∞–Ω–∏—è —Å—Ä–µ–¥—Å—Ç–≤.</p>
<p><strong>–ó–∞–≥–æ–ª–æ–≤–∫–∏:</strong></p>
<pre><code>Content-Type: application/json
</code></pre>
<p><strong>–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:</strong></p>
<pre><code class="language-json">{
  "teamSlug": "my-store",
  "token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9...",
  "paymentId": "pay_123456789",
  "amount": 150000,
  "description": "Order confirmation for books",
  "receipt": {
    "email": "customer@example.com",
    "phone": "+79001234567"
  },
  "data": {
    "confirmationReason": "Customer payment approved",
    "merchantReference": "ORDER-12345"
  }
}
</code></pre>
<p><strong>–û—Ç–≤–µ—Ç (200 OK):</strong></p>
<pre><code class="language-json">{
  "success": true,
  "paymentId": "pay_123456789",
  "orderId": "order-12345",
  "status": "CONFIRMED",
  "authorizedAmount": 150000,
  "confirmedAmount": 150000,
  "remainingAmount": 0,
  "currency": "RUB",
  "confirmedAt": "2025-01-30T12:05:00Z",
  "bankDetails": {
    "bankTransactionId": "bank_txn_789",
    "authorizationCode": "AUTH123",
    "rrn": "123456789012",
    "responseCode": "00",
    "responseMessage": "Approved"
  },
  "fees": {
    "processingFee": 3000,
    "totalFees": 3000,
    "feeCurrency": "RUB"
  },
  "settlement": {
    "settlementDate": "2025-01-31T00:00:00Z",
    "settlementAmount": 147000,
    "settlementCurrency": "RUB"
  }
}
</code></pre>
<h3>5. –û—Ç–º–µ–Ω–∞ –ø–ª–∞—Ç–µ–∂–∞</h3>
<p><strong>POST</strong> <code>/api/v1/PaymentCancel/cancel</code></p>
<p>–û—Ç–º–µ–Ω–∞, —Ä–µ–≤–µ—Ä—Å –∏–ª–∏ –≤–æ–∑–≤—Ä–∞—Ç –ø–ª–∞—Ç–µ–∂–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –µ–≥–æ —Å—Ç–∞—Ç—É—Å–∞.</p>
<p><strong>–ó–∞–≥–æ–ª–æ–≤–∫–∏:</strong></p>
<pre><code>Content-Type: application/json
</code></pre>
<p><strong>–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:</strong></p>
<pre><code class="language-json">{
  "teamSlug": "my-store",
  "token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9...",
  "paymentId": "pay_123456789",
  "reason": "Customer requested cancellation",
  "receipt": {
    "email": "customer@example.com",
    "phone": "+79001234567",
    "taxation": "osn"
  },
  "force": false,
  "data": {
    "externalRequestId": "cancel_req_12345",
    "customerReason": "Changed mind",
    "merchantReference": "CANCEL-ORDER-12345"
  }
}
</code></pre>
<p><strong>–û—Ç–≤–µ—Ç (200 OK) - –í–æ–∑–≤—Ä–∞—Ç:</strong></p>
<pre><code class="language-json">{
  "success": true,
  "paymentId": "pay_123456789",
  "orderId": "order-12345",
  "status": "REFUNDED",
  "cancellationType": "FULL_REFUND",
  "originalAmount": 150000,
  "cancelledAmount": 150000,
  "remainingAmount": 0,
  "currency": "RUB",
  "cancelledAt": "2025-01-30T12:10:00Z",
  "bankDetails": {
    "bankTransactionId": "bank_cancel_789",
    "originalAuthorizationCode": "AUTH123",
    "cancellationAuthorizationCode": "REFUND456",
    "rrn": "123456789012",
    "responseCode": "00",
    "responseMessage": "Refund Approved"
  },
  "refund": {
    "refundId": "refund_789",
    "refundStatus": "PROCESSING",
    "expectedProcessingTime": "3-5 business days",
    "refundMethod": "card",
    "cardInfo": {
      "cardMask": "4111****1111",
      "cardType": "Visa",
      "issuingBank": "Sberbank"
    }
  },
  "details": {
    "reason": "Customer requested cancellation",
    "wasForced": false,
    "processingDuration": "00:00:01.250"
  }
}
</code></pre>
<hr>
<h2>–ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤</h2>
<h3>–°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞ —Å –ø–æ–ª–Ω–æ–π –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π</h3>
<pre><code class="language-bash">#!/bin/bash

# –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–ª–∞—Ç–µ–∂–∞
team_slug="my-test-store"
password="MySecretPassword123"
amount="250000"
order_id="order-$(date +%s)"
currency="RUB"
description="Test payment"
email="customer@example.com"
success_url="https://mystore.com/success"
fail_url="https://mystore.com/fail"

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–∞ (–ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ –∞–ª—Ñ–∞–≤–∏—Ç–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ)
token_params="${amount}${currency}${description}${email}${fail_url}${order_id}${success_url}${team_slug}${password}"
token=$(echo -n "$token_params" | sha256sum | cut -d' ' -f1)

# –°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞
curl -X POST https://gateway.hackload.com/api/v1/PaymentInit/init \
  -H "Content-Type: application/json" \
  -d "{
    \"teamSlug\": \"$team_slug\",
    \"token\": \"$token\",
    \"amount\": $amount,
    \"orderId\": \"$order_id\",
    \"currency\": \"$currency\",
    \"description\": \"$description\",
    \"email\": \"$email\",
    \"successURL\": \"$success_url\",
    \"failURL\": \"$fail_url\",
    \"language\": \"ru\"
  }"
</code></pre>
<h3>–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –ø–ª–∞—Ç–µ–∂–∞</h3>
<pre><code class="language-bash">#!/bin/bash

# –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
team_slug="my-test-store"
password="MySecretPassword123"
payment_id="pay_123456789"

# –ü—Ä–æ—Å—Ç–æ–π —Ç–æ–∫–µ–Ω –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞ (–º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã)
token_params="${payment_id}${team_slug}${password}"
token=$(echo -n "$token_params" | sha256sum | cut -d' ' -f1)

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
curl -X POST https://gateway.hackload.com/api/v1/PaymentCheck/check \
  -H "Content-Type: application/json" \
  -d "{
    \"teamSlug\": \"$team_slug\",
    \"token\": \"$token\",
    \"paymentId\": \"$payment_id\",
    \"includeTransactions\": true,
    \"includeCardDetails\": true,
    \"language\": \"ru\"
  }"
</code></pre>
<h3>–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞</h3>
<pre><code class="language-bash">#!/bin/bash

# –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
team_slug="my-test-store"
password="MySecretPassword123"
payment_id="pay_123456789"
amount="250000"

# –¢–æ–∫–µ–Ω –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
token_params="${amount}${payment_id}${team_slug}${password}"
token=$(echo -n "$token_params" | sha256sum | cut -d' ' -f1)

# –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞
curl -X POST https://gateway.hackload.com/api/v1/PaymentConfirm/confirm \
  -H "Content-Type: application/json" \
  -d "{
    \"teamSlug\": \"$team_slug\",
    \"token\": \"$token\",
    \"paymentId\": \"$payment_id\",
    \"amount\": $amount,
    \"description\": \"Order confirmation\"
  }"
</code></pre>
<h3>–û—Ç–º–µ–Ω–∞ –ø–ª–∞—Ç–µ–∂–∞</h3>
<pre><code class="language-bash">#!/bin/bash

# –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è –æ—Ç–º–µ–Ω—ã
team_slug="my-test-store"
password="MySecretPassword123"
payment_id="pay_123456789"
reason="Customer requested cancellation"

# –¢–æ–∫–µ–Ω –¥–ª—è –æ—Ç–º–µ–Ω—ã
token_params="${payment_id}${team_slug}${password}"
token=$(echo -n "$token_params" | sha256sum | cut -d' ' -f1)

# –û—Ç–º–µ–Ω–∞ –ø–ª–∞—Ç–µ–∂–∞
curl -X POST https://gateway.hackload.com/api/v1/PaymentCancel/cancel \
  -H "Content-Type: application/json" \
  -d "{
    \"teamSlug\": \"$team_slug\",
    \"token\": \"$token\",
    \"paymentId\": \"$payment_id\",
    \"reason\": \"$reason\"
  }"
</code></pre>
<h2>Webhook-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</h2>
<p>–°–∏—Å—Ç–µ–º–∞ –ø–ª–∞—Ç–µ–∂–Ω–æ–≥–æ —à–ª—é–∑–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç HTTP-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (webhooks) –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω—ã–π URL –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞ –ø–ª–∞—Ç–µ–∂–∞. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω—É –º–≥–Ω–æ–≤–µ–Ω–Ω–æ —Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Å–æ–±—ã—Ç–∏—è –ø–ª–∞—Ç–µ–∂–µ–π –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ –æ–ø—Ä–æ—Å–∞ API.</p>
<h3>–ö–æ–≥–¥–∞ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è webhook-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</h3>
<p>Webhook –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ <strong>–∫–∞–∂–¥–æ–º</strong> –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞ –ø–ª–∞—Ç–µ–∂–∞ –≤ —Å–ª–µ–¥—É—é—â–∏—Ö —Å–ª—É—á–∞—è—Ö:</p>
<h4>–°—Ü–µ–Ω–∞—Ä–∏–π –ø–æ–ª–Ω–æ–≥–æ –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ –ø–ª–∞—Ç–µ–∂–∞</h4>
<p><strong>1. –°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞</strong> - <code>POST /api/v1/PaymentInit/init</code></p>
<pre><code class="language-json">{
  "teamSlug": "my-store",
  "amount": 150000,
  "orderId": "order-12345",
  "currency": "RUB",
  "notificationURL": "https://mystore.com/webhook"
}
</code></pre>
<p><strong>Webhook:</strong> –ü–µ—Ä–µ—Ö–æ–¥ <code>INIT</code> ‚Üí <code>NEW</code></p>
<pre><code class="language-json">{
  "paymentId": "pmt_abc123",
  "status": "NEW",
  "teamSlug": "my-store",
  "timestamp": "2025-01-15T10:30:00Z",
  "data": {
    "transition_timestamp": "2025-01-15T10:30:00Z",
    "status_name": "NEW"
  }
}
</code></pre>
<p><strong>2. –ü–æ–∫—É–ø–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –∫–∞—Ä—Ç—ã</strong> - <code>POST /api/v1/paymentform/submit</code></p>
<pre><code class="language-json">{
  "paymentId": "pmt_abc123",
  "cardNumber": "4111111111111111",
  "expiryDate": "12/25",
  "cvv": "123",
  "cardholderName": "John Doe",
  "email": "customer@example.com"
}
</code></pre>
<p><strong>Webhook #1:</strong> –ü–µ—Ä–µ—Ö–æ–¥ <code>NEW</code> ‚Üí <code>FORM_SHOWED</code> (–ø–æ–∫—É–ø–∞—Ç–µ–ª—å –Ω–∞—á–∞–ª –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ñ–æ—Ä–º—ã)</p>
<pre><code class="language-json">{
  "paymentId": "pmt_abc123",
  "status": "FORM_SHOWED",
  "teamSlug": "my-store",
  "timestamp": "2025-01-15T10:30:15Z",
  "data": {
    "transition_timestamp": "2025-01-15T10:30:15Z",
    "status_name": "FORM_SHOWED"
  }
}
</code></pre>
<p><strong>Webhook #2:</strong> –ü–µ—Ä–µ—Ö–æ–¥ <code>FORM_SHOWED</code> ‚Üí <code>AUTHORIZED</code> (–∫–∞—Ä—Ç–∞ —É—Å–ø–µ—à–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–∞)</p>
<pre><code class="language-json">{
  "paymentId": "pmt_abc123",
  "status": "AUTHORIZED",
  "teamSlug": "my-store",
  "timestamp": "2025-01-15T10:30:45Z",
  "data": {
    "transition_timestamp": "2025-01-15T10:30:45Z",
    "status_name": "AUTHORIZED"
  }
}
</code></pre>
<p><strong>–ï—Å–ª–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–∞—Ä—Ç—ã –Ω–µ—É–¥–∞—á–Ω–∞:</strong><br><strong>Webhook #2 (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π):</strong> –ü–µ—Ä–µ—Ö–æ–¥ <code>FORM_SHOWED</code> ‚Üí <code>REJECTED</code> (–æ—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–∞—Ä—Ç—ã)</p>
<pre><code class="language-json">{
  "paymentId": "pmt_abc123",
  "status": "failed",
  "teamSlug": "my-store",
  "timestamp": "2025-01-15T10:30:50Z",
  "data": {
    "event_type": "payment_failed",
    "failure_reason": "REJECTED"
  }
}
</code></pre>
<p><strong>3. –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞</strong> - <code>POST /api/v1/PaymentConfirm/confirm</code><br><strong>Webhook:</strong> –ü–µ—Ä–µ—Ö–æ–¥ <code>AUTHORIZED</code> ‚Üí <code>CONFIRMED</code> (–û–°–û–ë–´–ô —Å–ª—É—á–∞–π - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏)</p>
<pre><code class="language-json">{
  "paymentId": "pmt_abc123",
  "status": "completed",
  "teamSlug": "my-store",
  "timestamp": "2025-01-15T10:31:00Z",
  "data": {
    "event_type": "payment_completed"
  }
}
</code></pre>
<p><strong>HTTP-–∑–∞–≥–æ–ª–æ–≤–∫–∏ webhook:</strong></p>
<pre><code>X-Webhook-Signature: sha256=a1b2c3d4e5f6...
X-Webhook-Event: payment_completed
X-Webhook-Delivery: uuid-123e4567-e89b-12d3-a456-426614174000
User-Agent: PaymentGateway-Webhook/1.0
Content-Type: application/json
</code></pre>
<h4>–°—Ü–µ–Ω–∞—Ä–∏–∏ –æ—à–∏–±–æ–∫</h4>
<p><strong>–û—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞ –±–∞–Ω–∫–æ–º</strong><br><strong>Webhook:</strong> –ü–µ—Ä–µ—Ö–æ–¥ <code>FORM_SHOWED</code> ‚Üí <code>REJECTED</code></p>
<pre><code class="language-json">{
  "paymentId": "pmt_abc123",
  "status": "failed",
  "teamSlug": "my-store",
  "timestamp": "2025-01-15T10:30:50Z",
  "data": {
    "event_type": "payment_failed",
    "failure_reason": "REJECTED"
  }
}
</code></pre>
<p><strong>–û—Ç–º–µ–Ω–∞ –ø–ª–∞—Ç–µ–∂–∞</strong> - <code>POST /api/v1/PaymentCancel/cancel</code><br><strong>Webhook:</strong> –ü–µ—Ä–µ—Ö–æ–¥ –∫ <code>CANCELLED</code></p>
<pre><code class="language-json">{
  "paymentId": "pmt_abc123",
  "status": "failed",
  "teamSlug": "my-store",
  "timestamp": "2025-01-15T10:32:00Z",
  "data": {
    "event_type": "payment_failed",
    "failure_reason": "CANCELLED"
  }
}
</code></pre>
<h3>–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å webhook</h3>
<p>–ö–∞–∂–¥—ã–π webhook —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–¥–ø–∏—Å—å HMAC-SHA256 –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–ª–∏–Ω–Ω–æ—Å—Ç–∏:</p>
<pre><code class="language-javascript">// –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∏ webhook (Node.js)
const crypto = require('crypto');

function verifyWebhookSignature(payload, signature, secret) {
  const expectedSignature = crypto
    .createHmac('sha256', secret)
    .update(JSON.stringify(payload))
    .digest('hex');
  
  return signature === `sha256=${expectedSignature}`;
}
</code></pre>
<h3>Retry-–ª–æ–≥–∏–∫–∞</h3>
<p>–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç –æ—Ç–ø—Ä–∞–≤–∫—É webhook –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö:</p>
<ul>
<li><strong>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫:</strong> –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –¥–ª—è –∫–∞–∂–¥–æ–π –∫–æ–º–∞–Ω–¥—ã (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 3)</li>
<li><strong>–ò–Ω—Ç–µ—Ä–≤–∞–ª—ã:</strong> –≠–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ (1—Å, 2—Å, 4—Å, 8—Å...)</li>
<li><strong>Timeout:</strong> –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –¥–ª—è –∫–∞–∂–¥–æ–π –∫–æ–º–∞–Ω–¥—ã (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 30 —Å–µ–∫—É–Ω–¥)</li>
</ul>
<h3>–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å webhook —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏</h3>
<pre><code class="language-javascript">// –ü—Ä–∏–º–µ—Ä –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ webhook —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (Node.js)
const express = require('express');
const crypto = require('crypto');
const app = express();

app.use(express.json());

// Webhook endpoint
app.post('/payment/webhook', (req, res) =&gt; {
  const payment = req.body;
  const signature = req.headers['x-webhook-signature'];
  const eventType = req.headers['x-webhook-event'];
  
  // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∏ (–∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à webhook secret)
  const webhookSecret = 'your-webhook-secret-from-team-settings';
  const isValid = verifyWebhookSignature(req.body, signature, webhookSecret);
  
  if (!isValid) {
    console.error('Invalid webhook signature');
    return res.status(401).json({ error: 'Invalid signature' });
  }
  
  // –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
  console.log('Payment notification received:', {
    paymentId: payment.paymentId,
    status: payment.status,
    eventType: eventType,
    timestamp: payment.timestamp
  });
  
  // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å—Ç–∞—Ç—É—Å–æ–≤
  switch (payment.status) {
    case 'completed':
    case 'CONFIRMED':
      // –ü–ª–∞—Ç–µ–∂ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω - –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∑–∞–∫–∞–∑
      processOrder(payment.paymentId);
      break;
      
    case 'failed':
    case 'REJECTED':
    case 'CANCELLED':
    case 'EXPIRED':
      // –ü–ª–∞—Ç–µ–∂ –Ω–µ –ø—Ä–æ—à–µ–ª - —É–≤–µ–¥–æ–º–∏—Ç—å –ø–æ–∫—É–ø–∞—Ç–µ–ª—è
      notifyPaymentFailure(payment.paymentId, payment.data?.failure_reason);
      break;
      
    case 'AUTHORIZED':
      // –ü–ª–∞—Ç–µ–∂ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω - –º–æ–∂–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—Ç—å
      handlePaymentAuthorized(payment.paymentId);
      break;
      
    case 'NEW':
    case 'FORM_SHOWED':
      // –ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ —Å—Ç–∞—Ç—É—Å—ã - –º–æ–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å UI
      updatePaymentStatus(payment.paymentId, payment.status);
      break;
  }
  
  // –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–æ–ª—É—á–µ–Ω–∏—è webhook
  res.status(200).json({ received: true });
});

function verifyWebhookSignature(payload, signature, secret) {
  if (!signature || !signature.startsWith('sha256=')) {
    return false;
  }
  
  const expectedSignature = crypto
    .createHmac('sha256', secret)
    .update(JSON.stringify(payload))
    .digest('hex');
  
  return signature === `sha256=${expectedSignature}`;
}

function processOrder(paymentId) {
  console.log(`‚úÖ Processing order for payment ${paymentId}`);
  // –õ–æ–≥–∏–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞:
  // - –û—Ç–ø—Ä–∞–≤–∫–∞ —Ç–æ–≤–∞—Ä–∞
  // - –û—Ç–ø—Ä–∞–≤–∫–∞ —á–µ–∫–∞ –ø–æ–∫—É–ø–∞—Ç–µ–ª—é
  // - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–∫–∞–∑–∞ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
}

function notifyPaymentFailure(paymentId, reason) {
  console.log(`‚ùå Payment failed: ${paymentId}, reason: ${reason}`);
  // –õ–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –Ω–µ—É–¥–∞—á–Ω–æ–π –æ–ø–ª–∞—Ç—ã:
  // - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ–∫—É–ø–∞—Ç–µ–ª—è
  // - –û—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ –∑–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤
  // - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
}

function handlePaymentAuthorized(paymentId) {
  console.log(`üîÑ Payment authorized: ${paymentId}`);
  // –ü–ª–∞—Ç–µ–∂ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω, –º–æ–∂–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—Ç—å —á–µ—Ä–µ–∑ API
  // confirmPayment(paymentId);
}

function updatePaymentStatus(paymentId, status) {
  console.log(`üìä Payment status updated: ${paymentId} -&gt; ${status}`);
  // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –≤ UI –∏–ª–∏ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
}

app.listen(3000, () =&gt; {
  console.log('Webhook server running on port 3000');
});
</code></pre>
<h3>–û—Ç–ª–∞–¥–∫–∞ webhook</h3>
<p>–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è webhook-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:</p>
<ol>
<li><strong>–õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞:</strong> –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ ngrok –¥–ª—è –ø—Ä–æ–±—Ä–æ—Å–∞ localhost</li>
</ol>
<pre><code class="language-bash"># –£—Å—Ç–∞–Ω–æ–≤–∫–∞ ngrok
npm install -g ngrok

# –ó–∞–ø—É—Å–∫ —Ç—É–Ω–Ω–µ–ª—è
ngrok http 3000

# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π URL –≤ notificationURL
# –ù–∞–ø—Ä–∏–º–µ—Ä: https://abc123.ngrok.io/payment/webhook
</code></pre>
<ol start="2">
<li><strong>–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:</strong> –°–æ—Ö—Ä–∞–Ω—è–π—Ç–µ –≤—Å–µ –≤—Ö–æ–¥—è—â–∏–µ webhook –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞</li>
</ol>
<pre><code class="language-javascript">app.post('/payment/webhook', (req, res) =&gt; {
  // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ webhook –≤ —Ñ–∞–π–ª –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
  const fs = require('fs');
  const logEntry = {
    timestamp: new Date().toISOString(),
    headers: req.headers,
    body: req.body
  };
  
  fs.appendFileSync('webhook.log', JSON.stringify(logEntry) + '\n');
  
  // ... –æ—Å—Ç–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞
});
</code></pre>
<ol start="3">
<li><strong>–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:</strong> –û—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ –¥–æ—Å—Ç–∞–≤–∫—É webhook –≤ –ª–æ–≥–∞—Ö –ø–ª–∞—Ç–µ–∂–Ω–æ–≥–æ —à–ª—é–∑–∞</li>
</ol>
<h3>–ü–æ–ª–Ω—ã–π –ø—Ä–∏–º–µ—Ä –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏</h3>
<pre><code class="language-python"># Python –ø—Ä–∏–º–µ—Ä –ø–æ–ª–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
import hashlib
import requests
import json
from datetime import datetime

class PaymentGatewayClient:
    def __init__(self, team_slug, password, base_url="https://gateway.hackload.com/api/v1"):
        self.team_slug = team_slug
        self.password = password
        self.base_url = base_url
    
    def generate_token(self, params):
        """–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏"""
        # –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ –∞–ª—Ñ–∞–≤–∏—Ç–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ
        sorted_params = sorted(params.items())
        
        # –ö–æ–Ω–∫–∞—Ç–µ–Ω–∏—Ä—É–µ–º –∑–Ω–∞—á–µ–Ω–∏—è
        token_string = ''.join(str(value) for key, value in sorted_params)
        
        # –î–æ–±–∞–≤–ª—è–µ–º –ø–∞—Ä–æ–ª—å
        token_string += f"{self.password}"
        
        # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º SHA-256 —Ö–µ—à
        return hashlib.sha256(token_string.encode()).hexdigest()
    
    def create_payment(self, amount, order_id, currency="RUB", **kwargs):
        """–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–ª–∞—Ç–µ–∂–∞"""
        params = {
            'amount': str(amount),
            'currency': currency,
            'orderId': order_id,
            'teamSlug': self.team_slug
        }
        
        # –î–æ–±–∞–≤–ª—è–µ–º –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
        for key, value in kwargs.items():
            if value is not None:
                params[key] = str(value)
        
        # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Ç–æ–∫–µ–Ω
        token = self.generate_token(params)
        
        # –ü–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–ø—Ä–æ—Å
        request_data = params.copy()
        request_data['token'] = token
        
        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å
        response = requests.post(
            f"{self.base_url}/PaymentInit/init",
            json=request_data,
            headers={'Content-Type': 'application/json'}
        )
        
        return response.json()
    
    def check_payment_status(self, payment_id=None, order_id=None):
        """–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –ø–ª–∞—Ç–µ–∂–∞"""
        params = {
            'teamSlug': self.team_slug
        }
        
        if payment_id:
            params['paymentId'] = payment_id
        elif order_id:
            params['orderId'] = order_id
        else:
            raise ValueError("Either payment_id or order_id must be provided")
        
        # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Ç–æ–∫–µ–Ω
        token = self.generate_token(params)
        
        # –ü–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–ø—Ä–æ—Å
        request_data = params.copy()
        request_data['token'] = token
        request_data['includeTransactions'] = True
        
        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å
        response = requests.post(
            f"{self.base_url}/PaymentCheck/check",
            json=request_data,
            headers={'Content-Type': 'application/json'}
        )
        
        return response.json()
    
    def confirm_payment(self, payment_id, amount):
        """–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞"""
        params = {
            'amount': str(amount),
            'paymentId': payment_id,
            'teamSlug': self.team_slug
        }
        
        # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Ç–æ–∫–µ–Ω
        token = self.generate_token(params)
        
        # –ü–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–ø—Ä–æ—Å
        request_data = params.copy()
        request_data['token'] = token
        
        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å
        response = requests.post(
            f"{self.base_url}/PaymentConfirm/confirm",
            json=request_data,
            headers={'Content-Type': 'application/json'}
        )
        
        return response.json()
    
    def cancel_payment(self, payment_id, reason="API cancellation"):
        """–û—Ç–º–µ–Ω–∞ –ø–ª–∞—Ç–µ–∂–∞"""
        params = {
            'paymentId': payment_id,
            'teamSlug': self.team_slug
        }
        
        # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Ç–æ–∫–µ–Ω
        token = self.generate_token(params)
        
        # –ü–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–ø—Ä–æ—Å
        request_data = params.copy()
        request_data['token'] = token
        request_data['reason'] = reason
        
        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å
        response = requests.post(
            f"{self.base_url}/PaymentCancel/cancel",
            json=request_data,
            headers={'Content-Type': 'application/json'}
        )
        
        return response.json()

# –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
if __name__ == "__main__":
    # –°–æ–∑–¥–∞–µ–º –∫–ª–∏–µ–Ω—Ç–∞
    client = PaymentGatewayClient("my-store", "MySecretPassword123")
    
    # –°–æ–∑–¥–∞–µ–º –ø–ª–∞—Ç–µ–∂
    payment_result = client.create_payment(
        amount=100000,  # 1000 —Ä—É–±–ª–µ–π –≤ –∫–æ–ø–µ–π–∫–∞—Ö
        order_id=f"order-{datetime.now().strftime('%Y%m%d-%H%M%S')}",
        currency="RUB",
        description="Test payment",
        email="customer@example.com",
        successURL="https://mystore.com/success",
        failURL="https://mystore.com/fail"
    )
    
    if payment_result.get('success'):
        payment_id = payment_result['paymentId']
        print(f"Payment created: {payment_id}")
        print(f"Payment URL: {payment_result['paymentURL']}")
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
        status_result = client.check_payment_status(payment_id=payment_id)
        print(f"Payment status: {status_result}")
        
    else:
        print(f"Payment creation failed: {payment_result}")
</code></pre>
<hr>
<h2>–í–∞–∂–Ω—ã–µ –ø—Ä–∏–º–µ—á–∞–Ω–∏—è</h2>
<ol>
<li><strong>–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å</strong>: –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –ø–µ—Ä–µ–¥–∞–≤–∞–π—Ç–µ –ø–∞—Ä–æ–ª—å –∫–æ–º–∞–Ω–¥—ã –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –≤–∏–¥–µ. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTPS –¥–ª—è –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤.</li>
<li><strong>Idempotency</strong>: –î–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ–ª—è –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ (externalRequestId, idempotencyKey).</li>
<li><strong>Webhook</strong>: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –æ–±—Ä–∞–±–æ—Ç–∫—É webhook —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∞–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ —Å—Ç–∞—Ç—É—Å–∞ –ø–ª–∞—Ç–µ–∂–µ–π.</li>
<li><strong>–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</strong>: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –∫–∞—Ä—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏.</li>
<li><strong>–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥</strong>: –õ–æ–≥–∏—Ä—É–π—Ç–µ –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∏ –æ—Ç–≤–µ—Ç—ã API –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –ø—Ä–æ–±–ª–µ–º.</li>
<li><strong>Rate Limiting</strong>: –°–æ–±–ª—é–¥–∞–π—Ç–µ –ª–∏–º–∏—Ç—ã —á–∞—Å—Ç–æ—Ç—ã –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫.</li>
</ol>
</div>